<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta content="yes" name="apple-mobile-web-app-capable">
    <meta content="black" name="apple-mobile-web-app-status-bar-style">
    <meta content="telephone=no" name="format-detection">
    <meta content="email=no" name="format-detection">
    <title>订单</title>
    <link rel="stylesheet" href="http://cdn.static.runoob.com/libs/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="http://cdn.static.runoob.com/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="http://cdn.static.runoob.com/libs/bootstrap/3.3.7/js/bootstrap.min.js"></script>
</head>
<body>
<nav style="width: 150px;float: left;">
    <ul class="nav nav-pills nav-stacked">
        <li role="presentation"><a href="/admin">Home</a></li>
        <li role="presentation" class="active" ><a href="/admin/order">订单</a></li>
        <li role="presentation"><a href="/admin/qrcode">推广二维码</a></li>
        <li role="presentation"><a href="/admin/user/service">售后服务</a></li>
    </ul>
</nav>
<table id="table" class="table table-hover">
  <caption>订单</caption>
  <thead>
    <tr>
      <th>姓名</th>
      <th>地址</th>
      <th>电话</th>
      <th>产品</th>
      <th>规格</th>
      <th>金额</th>
      <th>订单号</th>
      <th>下单时间</th>
      <th>订单状态</th>
      <th>物流公司</th>
      <th>物流号</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
  <% if(data) { %>
    <% for(var i =0; i<data.length; i++){ %>  
    <tr>
      <td><%= data[i].name %></td>
      <td style="width: 100px;"><%= data[i].address %></td>
      <td><%= data[i].phone %></td>
      <td style="width: 100px;"><%= data[i].product %></td>
      <td><%= data[i].specifications %></td>
      <td><%= data[i].pay_money %></td>
      <td><%= data[i].out_trade_no %></td>
      <td><%= data[i].create_time %></td>
      <% if(data[i].status == 2) { %>
        <td>待发货</td>
      <% }else if(data[i].status == 3){ %>
        <td>已发货</td>
      <% }else if(data[i].status == 5){ %>
        <td>已完成</td>
      <% } %>
    
      <% if(data[i].delivery_company == 'shentong'){ %>
        <td>申通快递</td>
      <% }else{ %> 
        <td><%= data[i].delivery_company %></td>>
      <% } %>
      <td style="width: 100px;"><%= data[i].delivery_track_no %></td>
      <td><button id="modal" type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal">发货</button></td>
    </tr>
    <% } %>
  <% } %>
  </tbody>
</table>

<!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">发货</h4>
      </div>
      <div class="modal-body">
        <form>
          <div class="form-group">
            <label for="name">姓名</label>
            <input type="text" class="form-control" id="name" >
          </div>
          <div class="form-group">
            <label for="phone">电话</label>
            <input type="text" class="form-control" id="phone" >
          </div>
          <div class="form-group">
            <label for="address">地址</label>
            <input type="text" class="form-control" id="address" >
          </div>                    
          <div class="form-group">
            <label for="delivery_company">物流公司</label>
            <select name="delivery_company" id="delivery_company" class="form-control">
              <option value="shentong">申通</option>
            </select>
          </div>
          <div class="form-group">
            <label for="delivery_track_no">物流号</label>
            <input type="text" class="form-control"  name="delivery_track_no" id="delivery_track_no">
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
        <button type="button" class="btn btn-primary">确定</button>
      </div>
    </div>
  </div>
</div>

<script>
  $('#modal').on('click', function(event) {
    $this = $(this);
    var name = $this.parent();
    alert(name);
  });
</script>
</body>
</html>